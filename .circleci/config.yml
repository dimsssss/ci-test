version: 2
jobs:
  build_and_test:
    docker:
      - image: ubuntu:18.04
        auth:
          username: mydockerhub-user
          password: $DOCKERHUB_PASSWORD  # context / project UI env-var reference
      - image: cimg/node:14.17.0

    environment:
      TEST_REPORTS: /tmp/test-reports

    working_directory: ~/ci-test

    steps:
      - checkout
      - run:
            apt-get update -y && apt-get upgrade -y
      - run:
            apt-get install npm -y
      - run:
            npm -v
      - run: 
            ls -al
      - run:
            npm install
      - run:
            npm run test
            

workflows:
  version: 2
  build-deploy:
    jobs:
      - build_and_test
